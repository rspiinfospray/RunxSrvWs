<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout">
<head>
<title>Runx</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="description" content="" />
<meta name="keywords" content="" />

<link
	href="http://cdn.jsdelivr.net/webjars/bootstrap/3.2.0/css/bootstrap.min.css"
	th:href="@{/webjars/bootstrap/3.2.0/css/bootstrap.min.css}"
	rel="stylesheet" media="screen" />
<link
	href="http://cdn.jsdelivr.net/webjars/bootstrap/3.2.0/css/bootstrap.min.css"
	th:href="@{/webjars/bootstrap/3.2.0/css/bootstrap.min.css}"
	rel="stylesheet" media="screen" />
<style>
html, body, #mapgoogle {
	height: 90%;
	width: 80%;
}

#info-box {
	background-color: white;
	border: 1px solid black;
	top: 30px;
	height: 200px;
	padding: 10px;
	position: absolute;
	right: 200px;
}
</style>
<script src="http://cdn.jsdelivr.net/webjars/jquery/2.1.1/jquery.min.js"
	th:src="@{/webjars/jquery/2.1.1/jquery.min.js}"></script>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>


<script>
/*<![CDATA[*/
var map;
function initialize() {
  // Create a simple map.
  map = new google.maps.Map(document.getElementById('mapgoogle'), {
    zoom: 14,
    center: {lat:48.901945,lng: 2.274179},
    geodesic: true
  });

  var infowindow = new google.maps.InfoWindow();
  infowindow.setOptions({
	  pixelOffset:new google.maps.Size(0,-30)
  });
  
  // Load a GeoJSON from the same server as our demo.
  map.data.loadGeoJson('http://localhost:8080/json/googlemap/amne/activity/84887/');
  
  map.data.addListener('click', function(event) {
	  
	  
	  	var content = $('<div/>');
	  	
	  	var lap = event.feature.getProperty('lap');
	  	if(lap != null){
	  		content.append('<div>'+"Kilomètre : "+  lap+'</div>');
	  	}
	  	var startLap = event.feature.getProperty('startLap');
	  	if(startLap != null){
	  		content.append('<div>Début de la course</div>');
	  	}
	  	var stopLap = event.feature.getProperty('stopLap');
	  	if(stopLap != null){
	  		content.append('<div>Fin de la course</div>');
	  	}
	  	var avgVitesse = event.feature.getProperty('avgVitesse');
	  	if(avgVitesse != null){
	  		content.append('<div>'+"Vitesse moy. : "+  avgVitesse+' Km/h</div>');
	  	}
	  	var speedIndice = event.feature.getProperty('speedIndice');
	  	if(speedIndice !=  null){
	  		content.append('<div>'+"Indice vitesse : "+  speedIndice+' %</div>');
  		}
	  	
	  	var vitesse = event.feature.getProperty('vitesse');
	  	if(vitesse !=  null){
	  		content.append('<div>'+"Vitesse : "+  vitesse+' Km/h</div>');
  		}
	  	
	  	content.append('<div>'+"Heure : "+  event.feature.getProperty('heure')+'</div>');
	  	
	  	
	  	 if (event.feature.getGeometry() instanceof google.maps.LatLng) {
	  		infowindow.setPosition(event.feature.getGeometry());
	  	  } else if (event.feature.getGeometry() instanceof google.maps.Data.Point) {
	  		infowindow.setPosition(event.feature.getGeometry().get());	  		  
	  	  }
	    
	  	infowindow.setContent(content.html());
	    infowindow.open(map);

	    
	  });
 
  map.data.setStyle(function(feature) {

	    var speedIndice = feature.getProperty('speedIndice');
        var r = Math.floor((255 * speedIndice) / 100),
            g = Math.floor((255 * (100 - speedIndice)) / 100),
            b = 0;
	    
	    
	    return /** @type {google.maps.Data.StyleOptions} */({
	      fillColor: "rgb("+r+", "+g+", "+b+")",
	      strokeColor:  "rgb("+r+", "+g+", "+b+")",
	      strokeWeight: 4
	    });
	  });

}


$(function() {
	
	 $.getJSON('http://localhost:8080/json/chart/amne/activity/84887/', function(data) {
	    	$('#containerChartVitesse').highcharts(data);
	    });
	 

	$( "#chartTab" ).tabs();
		
	
});

  
google.maps.event.addDomListener(window, 'load', initialize);


/*]]>*/
</script>

</head>


<body>
	<div id="mapgoogle"></div>
	<table>
		<tr>
			<td>

				<div class="container">
					<ul id="chartTab" class="nav nav-tabs">
						<li class="active"><a href="#tab_a" data-toggle="tab">Vitesse en Km/h</a></li>
						<li><a href="#tab_b" data-toggle="tab">Frequence cardiaque</a></li>
						<li><a href="#tab_c" data-toggle="tab">Tab C</a></li>
						<li><a href="#tab_d" data-toggle="tab">Tab D</a></li>
					</ul>
					<div class="tab-content">
						<div class="tab-pane active" id="tab_a">
							<h4>Pane A</h4>
							<div id="containerChartVitesse"
								style="min-width: 310px; height: 400px; margin: 0 auto"></div>
						</div>
						<div class="tab-pane" id="tab_b">
							<h4>Pane B</h4>
							<p>Pellentesque habitant morbi tristique senectus et netus et
								malesuada fames ac turpis egestas.</p>
						</div>
						<div class="tab-pane" id="tab_c">
							<h4>Pane C</h4>
							<p>Pellentesque habitant morbi tristique senectus et netus et
								malesuada fames ac turpis egestas.</p>
						</div>
						<div class="tab-pane" id="tab_d">
							<h4>Pane D</h4>
							<p>Pellentesque habitant morbi tristique senectus et netus et
								malesuada fames ac turpis egestas.</p>
						</div>
					</div>
					<!-- tab content -->
				</div>
				<!-- end of container -->
			</td>
		</tr>
		<tr>
			<td>
				<div class="container">
					<table class="table table-bordered table-striped">
						<thead>
							<tr>
								<th>Numéro</th>
								<th>Temps</th>
								<th>Distance</th>
								<th>Vitesse Max</th>
								<th>Vitesse Moyenne</th>
								<th>Calories Brulées</th>
								<th>Ascention Vertical</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="row : ${laps}">
								<td th:text="${row.messageIndex}">1</td>
								<td th:text="${row.beginLapTime}">12</td>
								<td th:text="${row.totalDistance}">1</td>
								<td th:text="${row.maxSpeed}">1</td>
								<td th:text="${row.avgSpeed}">1</td>
								<td th:text="${row.totalCalories}">1</td>
								<td th:text="${row.totalAscent}">1</td>
							</tr>
						</tbody>
					</table>
				</div>
			</td>
		</tr>
		<tr>
			<td>
				<div class="container">
					<table class="table table-bordered table-striped">
						<thead>
							<tr>
								<th>Vitesse Max(Km/h)</th>
								<th>Vitesse Moyenne(Km/h)</th>
								<th>Distance total(Mètres)</th>
								<th>Total calories brulées</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td th:text="${maxSpeed}">12</td>
								<td th:text="${avgSpeed}">1</td>
								<td th:text="${distanceTotal}">1</td>
								<td th:text="${caloriesTotal}">1</td>
							</tr>
						</tbody>
					</table>
				</div>
			</td>
		</tr>
	</table>



</body>


</html>